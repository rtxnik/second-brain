# 32.01.13 Dockerfile

Dockerfile — это текстовый файл с инструкциями для автоматической сборки образов Docker. **Каждая инструкция в Dockerfile создает новый слой в образе, что обеспечивает эффективное кеширование и переиспользование**.

## Основные инструкции

| Инструкция | Назначение |
|------------|------------|
| `FROM` | Базовый образ (всегда первая) |
| `RUN` | Выполнить команду при сборке |
| `COPY` | Копировать файлы в образ |
| `ADD` | Копировать + распаковка архивов |
| `WORKDIR` | Рабочая директория |
| `EXPOSE` | Документировать порты |
| `ENV` | Переменные среды |
| `CMD` | Команда по умолчанию (переопределяется) |
| `ENTRYPOINT` | Точка входа (не переопределяется) |

## Пример

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

## Сборка

```bash
docker build -t myapp:latest .
docker build -t myapp:v1 -f Dockerfile.prod .
```

## Лучшие практики

- Использовать `.dockerignore` для исключения ненужных файлов
- Использовать multi-stage builds для уменьшения размера
- Объединять RUN команды для уменьшения слоёв
- Размещать часто изменяемые слои в конце

---

Дата создания: 2025-12-01

Ссылки:

[[32.01.00 Docker]]
[[32.01.02 Термины]]
[[32.01.08 Image]] 
[[32.01.07 Container]]
