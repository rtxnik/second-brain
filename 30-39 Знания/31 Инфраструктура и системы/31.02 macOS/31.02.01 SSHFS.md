# 31.02.01 SSHFS

Монтирование удалённой Linux папки на macOS через SSH.

## Установка

```bash
brew install --cask macfuse
brew install gromgit/fuse/sshfs-mac
# перезагрузка может потребоваться
```

## Базовое использование

```bash
# создать точку монтирования
mkdir ~/Ubuntu

# монтировать
sshfs user@host:/remote/path ~/Ubuntu \
  -o reconnect,volname=Remote,noappledouble

# размонтировать
umount ~/Ubuntu
# или
diskutil unmount ~/Ubuntu
```

## SSH ключи (без пароля)

```bash
ssh-keygen -t ed25519
ssh-copy-id user@host
```

## Автомонтирование через LaunchAgent

Файл ~/Library/LaunchAgents/com.user.sshfs.plist:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
  "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>com.user.sshfs</string>
  <key>ProgramArguments</key>
  <array>
    <string>/usr/local/bin/sshfs</string>
    <string>user@host:/remote/path</string>
    <string>/Users/USERNAME/Ubuntu</string>
    <string>-o</string>
    <string>reconnect,volname=Remote,noappledouble</string>
  </array>
  <key>RunAtLoad</key>
  <true/>
</dict>
</plist>
```

Загрузить:

```bash
launchctl load ~/Library/LaunchAgents/com.user.sshfs.plist
```

## Дополнительные опции

```bash
-o defer_permissions,compression=yes,ServerAliveInterval=15
```

## Устранение проблем

```bash
# принудительное размонтирование
sudo diskutil unmount force ~/Ubuntu

# проверка статуса
mount | grep Ubuntu
```

---

Дата создания: 2025-05-15
Ссылки:

[[31.02.00 macOS]]
[[31.24 SSH]]
