# 34.01.50 LEMP Stack

LEMP - комбинация Linux, Nginx (Engine-X), MySQL/MariaDB и PHP для веб-приложений.

## Структура проекта

```
lemp-ansible/
├── inventory/hosts.yml
├── group_vars/all.yml
├── roles/
│   ├── nginx/
│   ├── mysql/
│   └── php/
└── playbooks/lemp.yml
```

## Основной playbook

```yaml
---
- name: Deploy LEMP Stack
  hosts: webservers
  become: yes
  vars:
    mysql_root_password: "{{ vault_mysql_password }}"
    php_version: "8.1"

  tasks:
    - name: Update packages
      apt:
        update_cache: yes

    - name: Install Nginx
      apt:
        name: nginx
        state: present
      notify: start nginx

    - name: Install MySQL
      apt:
        name:
          - mysql-server
          - python3-pymysql
        state: present

    - name: Install PHP
      apt:
        name:
          - "php{{ php_version }}-fpm"
          - "php{{ php_version }}-mysql"
          - "php{{ php_version }}-curl"
        state: present
      notify: restart php-fpm

  handlers:
    - name: start nginx
      service:
        name: nginx
        state: started
        enabled: yes

    - name: restart php-fpm
      service:
        name: "php{{ php_version }}-fpm"
        state: restarted
```

## Запуск

```bash
ansible-playbook -i inventory/hosts.yml playbooks/lemp.yml --check
ansible-playbook -i inventory/hosts.yml playbooks/lemp.yml
```

## Преимущества автоматизации

- Консистентность конфигурации
- Быстрое развёртывание
- Идемпотентность
- Версионирование как код

---

Дата создания: 2025-12-01
Ссылки:

[[34.01.00 Ansible]]
[[34.01.13 Playbook]]
[[34.01.14 Roles]]
