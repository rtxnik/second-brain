# 34.01.51 Лабораторная работа 1

Базовая лабораторная по освоению Ansible. Цель: создать playbook для настройки веб-сервера.

## Задание

Автоматизировать настройку Ubuntu:
- Установка nginx
- Развёртывание HTML сайта
- Настройка firewall
- Создание пользователя

## Структура проекта

```
ansible-lab1/
├── inventory.ini
├── site.yml
├── group_vars/
│   └── webservers.yml
└── files/
    └── html/
        └── index.html
```

## Inventory

```ini
[webservers]
web1 ansible_host=192.168.1.10 ansible_user=ubuntu

[webservers:vars]
ansible_ssh_private_key_file=~/.ssh/lab_key
```

## Переменные

```yaml
# group_vars/webservers.yml
nginx_port: 80
document_root: /var/www/html
app_user: webapp
allowed_ports: [22, 80, 443]
```

## Playbook

```yaml
---
- name: "Configure web servers"
  hosts: webservers
  become: true
  
  tasks:
    - name: "Install nginx"
      ansible.builtin.apt:
        name: nginx
        state: present
        
    - name: "Deploy website"
      ansible.builtin.template:
        src: files/html/index.html
        dest: "{{ document_root }}/index.html"
        
    - name: "Configure firewall"
      ansible.builtin.ufw:
        rule: allow
        port: "{{ item }}"
      loop: "{{ allowed_ports }}"
```

## Запуск

```bash
ansible-playbook site.yml -i inventory.ini --check
ansible-playbook site.yml -i inventory.ini
```

---

Дата создания: 2025-12-01

Ссылки:

[[34.01.00 Ansible]]
[[34.01.13 Playbook]]
[[34.01.16 Variables]]
