# 34.02.31 Установка Zabbix-Agent

Установка и настройка Zabbix Agent на Ubuntu с шифрованием PSK.

## Установка

```bash
# Добавить репозиторий (Zabbix 6.0, Ubuntu 20.04)
wget https://repo.zabbix.com/zabbix/6.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_6.0-4+ubuntu20.04_all.deb
sudo dpkg -i zabbix-release_6.0-4+ubuntu20.04_all.deb
sudo apt update

# Установить агент
sudo apt install zabbix-agent
```

## Конфигурация

```ini
# /etc/zabbix/zabbix_agentd.conf

Server=192.168.1.100
ServerActive=192.168.1.100
Hostname=MyServer
ListenPort=10050
LogFile=/var/log/zabbix-agent/zabbix_agentd.log
```

## PSK шифрование

```bash
# Генерация ключа
sudo openssl rand -hex 32 > /etc/zabbix/agent_psk.key
sudo chown zabbix:zabbix /etc/zabbix/agent_psk.key
sudo chmod 600 /etc/zabbix/agent_psk.key
```

```ini
# Добавить в конфигурацию
TLSConnect=psk
TLSAccept=psk
TLSPSKFile=/etc/zabbix/agent_psk.key
TLSPSKIdentity=PSK_MyServer
```

## Запуск

```bash
sudo systemctl restart zabbix-agent
sudo systemctl enable zabbix-agent

# Firewall
sudo ufw allow from 192.168.1.100 to any port 10050
```

## Проверка

```bash
sudo systemctl status zabbix-agent
sudo tail -f /var/log/zabbix-agent/zabbix_agentd.log
```

---

Дата создания: 2025-12-01
Ссылки:

[[34.02.00 Мониторинг]]
[[34.02.10 Zabbix]]
