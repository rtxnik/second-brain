# 21.09.01 Roadmap

> Дорожная карта развития homelab

## Фаза 1: Подготовка к Kubernetes

**Статус:** В процессе  
**Срок:** Декабрь 2025

### Задачи

- [ ] **1.1 VM Template**

  - Скачать Ubuntu 24.04 Cloud Image
  - Создать template (ID 9000)
  - Настроить cloud-init
  - Установить K8s prerequisites
  - Протестировать клонирование

- [ ] **1.2 DNS записи**

  - Добавить записи для Production cluster
  - Добавить записи для Test cluster
  - Добавить wildcard для apps
  - Проверить резолвинг
  - Синхронизировать slave

- [ ] **1.3 OpenTofu**
  - Финализировать VM module
  - Создать конфиг для Test cluster
  - Создать конфиг для Production cluster
  - Протестировать создание VMs

---

## Фаза 2: Test Kubernetes Cluster

**Статус:** Планируется  
**Срок:** Декабрь 2025

### Задачи

- [ ] **2.1 Создание VMs**

  - Запустить OpenTofu для test cluster
  - Проверить SSH доступ
  - Проверить DNS резолвинг

- [ ] **2.2 Kubespray**

  - Подготовить inventory
  - Настроить group_vars
  - Запустить cluster.yml
  - Получить kubeconfig

- [ ] **2.3 Базовые компоненты**

  - MetalLB
  - NGINX Ingress
  - cert-manager (self-signed)

- [ ] **2.4 Валидация**
  - Проверить все ноды Ready
  - Задеплоить тестовое приложение
  - Проверить ingress и DNS

---

## Фаза 3: Production Kubernetes Cluster

**Статус:** Планируется  
**Срок:** Декабрь 2025 - Январь 2026

### Задачи

- [ ] **3.1 Создание VMs**

  - Запустить OpenTofu для prod cluster
  - Проверить ресурсы

- [ ] **3.2 Kubespray**

  - Скопировать inventory из test
  - Адаптировать IP и имена
  - Запустить деплой
  - Настроить HA API VIP

- [ ] **3.3 Компоненты**
  - MetalLB
  - NGINX Ingress
  - cert-manager
  - Longhorn storage

---

## Фаза 4: Observability

**Статус:** Планируется  
**Срок:** Январь 2026

### Задачи

- [ ] **4.1 Prometheus Stack**

  - kube-prometheus-stack (Helm)
  - Node exporter на Proxmox
  - ServiceMonitors

- [ ] **4.2 Grafana**

  - Dashboards для K8s
  - Dashboards для Proxmox
  - Dashboards для Ceph

- [ ] **4.3 Logging**

  - Loki
  - Promtail
  - Grafana datasource

- [ ] **4.4 Alerting**
  - AlertManager
  - Правила алертов
  - Нотификации (Telegram/Email)

---

## Фаза 5: GitOps

**Статус:** Планируется  
**Срок:** Январь 2026

### Задачи

- [ ] **5.1 ArgoCD**

  - Установить ArgoCD
  - Настроить SSO (опционально)
  - Подключить Git репозиторий

- [ ] **5.2 Структура репозитория**

  - apps/ — приложения
  - infrastructure/ — базовые компоненты
  - clusters/ — cluster-specific configs

- [ ] **5.3 App of Apps**
  - Настроить автоматическую синхронизацию
  - Promote workflow (test → prod)

---

## Фаза 6: Приложения

**Статус:** Планируется  
**Срок:** Февраль 2026+

### Кандидаты

- [ ] Gitea / GitLab
- [ ] Nextcloud
- [ ] Vaultwarden
- [ ] Home Assistant
- [ ] Media server (Jellyfin)
- [ ] Personal projects

---

## Фаза 7: Расширение

**Статус:** Будущее  
**Срок:** 2026+

### Возможности

- [ ] 4-я нода Proxmox
- [ ] 10GbE сеть
- [ ] Расширение TrueNAS
- [ ] Offsite backup
- [ ] Multi-cluster federation

---

## Timeline

```
Дек 2025   Янв 2026   Фев 2026   Мар 2026
    │          │          │          │
    ▼          ▼          ▼          ▼
┌───────┐  ┌───────┐  ┌───────┐  ┌───────┐
│Фаза 1 │  │Фаза 4 │  │Фаза 6 │  │Фаза 7 │
│Фаза 2 │  │Фаза 5 │  │  ...  │  │  ...  │
│Фаза 3 │  │       │  │       │  │       │
└───────┘  └───────┘  └───────┘  └───────┘
```

---

## Следующие шаги

1. ⏳ Создать VM template (21.03.03)
2. ⏳ Добавить DNS записи (21.05.04)
3. ⏳ Развернуть Test cluster через OpenTofu + Kubespray

---

Дата создания: 02-12-2025 18:22

Последнее обновление: 02-12-2025

#### Ссылки:

[[21.09.00 Планирование]]
[[21.00 Homelab]]
